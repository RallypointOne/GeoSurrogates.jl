---
title: "Classical Surrogates"
---

## LinReg

Linear regression surrogate for raster data.

### Constructor

```julia
LinReg(r::Raster, formula = @formula(layer1 ~ 1 + X * Y))
```

**Arguments:**

- `r::Raster` - Input raster to fit
- `formula` - StatsModels formula (default: `@formula(layer1 ~ 1 + X * Y)`)

### Methods

```julia
predict(model::LinReg, coords::Tuple)  # Predict at single point
predict(model::LinReg, r::Raster)      # Predict on raster grid
```

### Example

```julia
using GeoSurrogates, Rasters, StatsModels

elev = Raster("elevation.tif")

# Simple linear model
model = LinReg(elev)

# Quadratic model
model = LinReg(elev, @formula(layer1 ~ 1 + X + Y + X^2 + Y^2))

predict(model, (-105.5, 40.2))
```

---

## RasterWrap

Interpolation-based surrogate using B-splines.

### Constructor

```julia
RasterWrap(r::Raster; int = BSpline(Linear()), ext = nothing)
```

**Arguments:**

- `r::Raster` - Input raster to wrap
- `int` - Interpolation algorithm (default: `BSpline(Linear())`)
- `ext` - Extrapolation algorithm (default: `nothing`, no extrapolation)

### Methods

```julia
predict(rw::RasterWrap, coords::Tuple)  # Predict at single point
predict(rw::RasterWrap, r::Raster)      # Predict on raster grid
GeoInterface.crs(rw)                     # Get coordinate reference system
GeoInterface.extent(rw)                  # Get spatial extent
```

### Example

```julia
using GeoSurrogates, Rasters, Interpolations

elev = Raster("elevation.tif")

# Default linear interpolation
rw = RasterWrap(elev)

# Cubic interpolation with flat extrapolation
rw = RasterWrap(elev; int=BSpline(Cubic()), ext=Flat())

# Exact interpolation at grid points
for (coord, data) in zip(DimPoints(elev), elev)
    @assert predict(rw, coord) == data
end
```

---

## CategoricalRasterWrap

Kernel smoothing surrogate for categorical rasters.

### Constructor

```julia
CategoricalRasterWrap(r::Raster; kernel = Base.Fix2(gaussian, 4))
```

**Arguments:**

- `r::Raster` - Categorical raster (integer or categorical values)
- `kernel` - Kernel function for weighting (default: Gaussian with k=4)

### Methods

```julia
predict(crw::CategoricalRasterWrap, coords::Tuple)  # Returns Dict of class probabilities
predict(crw::CategoricalRasterWrap, r::Raster)      # Returns Raster of probability Dicts
GeoInterface.crs(crw)
GeoInterface.extent(crw)
```

### Example

```julia
using GeoSurrogates, Rasters

veg = Raster("vegetation.tif")

crw = CategoricalRasterWrap(veg)

# Returns probability distribution over classes
probs = predict(crw, (-105.5, 40.2))
# Dict{Int32, Float64}(1 => 0.7, 2 => 0.2, 3 => 0.1)

# Most likely class
argmax(probs)
```

---

## GeomWrap

Geometry-based surrogate using distance kernels.

### Constructor

```julia
GeomWrap(geometry; kernel = Base.Fix2(gaussian, 4))
```

**Arguments:**

- `geometry` - Any GeoInterface-compatible geometry (Point, Line, Polygon, etc.)
- `kernel` - Kernel function applied to distance (default: Gaussian with k=4)

### Methods

```julia
predict(gw::GeomWrap, coords::Tuple)  # Returns value in [0, 1]
predict(gw::GeomWrap, r::Raster)      # Returns Raster of influence values
GeoInterface.crs(gw)
GeoInterface.extent(gw)
```

### Behavior

- Points **inside** or **on** the geometry: `predict(...) ≈ 1.0`
- Points **near** the geometry: `0 < predict(...) < 1`
- Points **far** from the geometry: `predict(...) ≈ 0.0`

The `kernel` parameter controls the decay rate. Higher values create sharper boundaries.

### Example

```julia
using GeoSurrogates, GeoInterface

# Point influence
pt = GeoInterface.Point(0.0, 0.0)
gw = GeomWrap(pt)

predict(gw, (0, 0))    # 1.0 (at the point)
predict(gw, (1, 0))    # ≈ 0.00034 (1 unit away)

# Polygon influence (e.g., fire perimeter)
poly = GeoInterface.Polygon(...)
gw = GeomWrap(poly; kernel=Base.Fix2(gaussian, 2))  # Wider influence

# Create influence raster
influence = predict(gw, template_raster)
```
